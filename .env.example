# ZiStudy API configuration template
# Copy this file to `.env` (or `.env.local`) and adjust values as needed.

# ------------------------------------------------------------------------------
# Core application settings
# ------------------------------------------------------------------------------
# Environment: choose from local, test, production.
ZISTUDY_ENVIRONMENT=local
ZISTUDY_APP_NAME=ZiStudy API
ZISTUDY_API_VERSION=0.2.0
ZISTUDY_API_HOST=0.0.0.0
ZISTUDY_API_PORT=8000

# ------------------------------------------------------------------------------
# Database configuration
# ------------------------------------------------------------------------------
ZISTUDY_DATABASE_URL=postgresql+asyncpg://zistudy:zistudy@localhost:5432/zistudy_dev
ZISTUDY_DB_ECHO=0
ZISTUDY_DB_POOL_SIZE=10
ZISTUDY_DB_MAX_OVERFLOW=20

# ------------------------------------------------------------------------------
# Authentication / security
# ------------------------------------------------------------------------------
# Ensure this secret is at least 16 characters and unique per environment.
ZISTUDY_JWT_SECRET=change-me-to-a-strong-secret
ZISTUDY_JWT_ALGORITHM=HS256
ZISTUDY_ACCESS_TOKEN_EXP_MINUTES=15
ZISTUDY_REFRESH_TOKEN_EXP_MINUTES=20160
ZISTUDY_REFRESH_TOKEN_LENGTH=64

# ------------------------------------------------------------------------------
# Logging & API server
# ------------------------------------------------------------------------------
# Log level options: TRACE, DEBUG, INFO, WARNING, ERROR, CRITICAL.
ZISTUDY_LOG_LEVEL=INFO
ZISTUDY_LOG_JSON=0
ZISTUDY_API_HOST=0.0.0.0
ZISTUDY_API_PORT=8000
# Comma-separated list of allowed origins, e.g. https://example.com,http://localhost:3000
ZISTUDY_CORS_ORIGINS=*

# ------------------------------------------------------------------------------
# Celery background processing
# ------------------------------------------------------------------------------
ZISTUDY_CELERY_BROKER_URL=redis://localhost:6379/0
ZISTUDY_CELERY_RESULT_BACKEND=redis://localhost:6379/1
# Set to 1 to run tasks synchronously (useful for local testing without a worker).
# Possible values: 0 (async, default) or 1 (eager).
ZISTUDY_CELERY_TASK_ALWAYS_EAGER=0

# ------------------------------------------------------------------------------
# AI generation (Gemini)
# ------------------------------------------------------------------------------
# Required for AI-powered study card generation.
ZISTUDY_GEMINI_API_KEY=your-gemini-api-key
ZISTUDY_GEMINI_MODEL=models/gemini-2.5-pro
ZISTUDY_GEMINI_ENDPOINT=https://generativelanguage.googleapis.com/v1beta
ZISTUDY_GEMINI_REQUEST_TIMEOUT_SECONDS=60.0
ZISTUDY_AI_GENERATION_DEFAULT_TEMPERATURE=0.35
ZISTUDY_AI_GENERATION_DEFAULT_CARD_COUNT=8
ZISTUDY_AI_GENERATION_MAX_CARD_COUNT=20
ZISTUDY_AI_GENERATION_MAX_ATTEMPTS=3

# ------------------------------------------------------------------------------
# Optional feature toggles
# ------------------------------------------------------------------------------
# Process type options:
#   api             -> run the FastAPI server only.
#   worker          -> run the Celery worker only.
#   api-with-worker -> run both API and worker in a single process (local dev default).
ZISTUDY_PROCESS_TYPE=api-with-worker
ZISTUDY_CELERY_LOGLEVEL=INFO
ZISTUDY_GEMINI_PDF_MODE=native
